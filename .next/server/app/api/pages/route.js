(()=>{var e={};e.id=806,e.ids=[806],e.modules={13878:e=>{function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=13878,e.exports=t},30517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},41808:e=>{"use strict";e.exports=require("net")},77282:e=>{"use strict";e.exports=require("process")},12781:e=>{"use strict";e.exports=require("stream")},71576:e=>{"use strict";e.exports=require("string_decoder")},39512:e=>{"use strict";e.exports=require("timers")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},93585:(e,t,r)=>{"use strict";r.r(t),r.d(t,{headerHooks:()=>v,originalPathname:()=>_,patchFetch:()=>f,requestAsyncStorage:()=>d,routeModule:()=>l,serverHooks:()=>E,staticGenerationAsyncStorage:()=>g,staticGenerationBailout:()=>x});var s={};r.r(s),r.d(s,{GET:()=>c,POST:()=>p});var a=r(95419),o=r(69108),u=r(99678),i=r(78070),n=r(47033);async function c(e){try{let{searchParams:t}=new URL(e.url),r=t.get("url");if(!n.db)return i.default.json({error:"Database not available"},{status:500});if(r){let[e]=await n.db.execute("SELECT * FROM page_content WHERE page_url = ?",[r]);return i.default.json({page:e[0]||null})}let[s]=await n.db.execute("SELECT * FROM page_content ORDER BY page_url");return i.default.json({pages:s})}catch(e){return i.default.json({pages:[]})}}async function p(e){try{let{page_url:t,title:r,content:s,meta_description:a}=await e.json();if(!n.db)return i.default.json({error:"Database not available"},{status:500});return await n.db.execute(`
      INSERT INTO page_content (page_url, title, content, meta_description, updated_at) 
      VALUES (?, ?, ?, ?, NOW())
      ON DUPLICATE KEY UPDATE 
      title = VALUES(title), 
      content = VALUES(content), 
      meta_description = VALUES(meta_description),
      updated_at = NOW()
    `,[t,r,s,a]),i.default.json({success:!0})}catch(e){return i.default.json({error:"Failed to save page"},{status:500})}}let l=new a.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/pages/route",pathname:"/api/pages",filename:"route",bundlePath:"app/api/pages/route"},resolvedPagePath:"E:\\skyhost\\app\\api\\pages\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:d,staticGenerationAsyncStorage:g,serverHooks:E,headerHooks:v,staticGenerationBailout:x}=l,_="/api/pages/route";function f(){return(0,u.patchFetch)({serverHooks:E,staticGenerationAsyncStorage:g})}},47033:(e,t,r)=>{"use strict";r.r(t),r.d(t,{db:()=>a});var s=r(63069);let a=null;try{let e=process.env.DB_HOST?.includes("tidbcloud.com"),t={host:process.env.DB_HOST||"localhost",port:parseInt(process.env.DB_PORT||"3306"),user:process.env.DB_USER||"root",password:process.env.DB_PASSWORD||"",database:process.env.DB_NAME||"agency",waitForConnections:!0,connectionLimit:10,queueLimit:0};e&&(t.ssl={rejectUnauthorized:!0}),a=s.createPool(t)}catch(e){a=null}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,206,69],()=>r(93585));module.exports=s})();